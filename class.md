# 类图

你可以在这里找到我[所有图的绘制源文件](https://www.yuque.com/books/share/7a36531d-5b56-4a7a-b04e-87630f62eb41?#)

> 类图比较复杂,能不画尽量不画

## 什么是类图

类图(Class diagram)是显示了模型的静态结构,特别是模型中存在的类、类的内部结构以及它们与其他类的关系等。类图不显示暂时性的信息。类图是面向对象建模的主要组成部分。它既用于应用程序的系统分类的一般概念建模,也用于详细建模,将模型转换成编程代码。类图也可用于数据建模。

类图主要是用来表示对象之间的关系,重要的就是六大关系

![20200224123104360](https://raw.githubusercontent.com/learner-lu/picbed/master/20200224123104360.png)

> 众所周知三幻神有四个,咳咳,第一个和第二个都是关联关系可以合并成一类

## 怎么画类图

类图画起来是要比其他的图更加麻烦一些的,它要考虑的东西很多.

### 类

![20220609014240](https://raw.githubusercontent.com/learner-lu/picbed/master/20220609014240.png)

对于一个类来说,你需要填入的信息是: 类名,类内的变量,类方法(函数)

比如对于一个简单的User类,`-`代表私有变量,`+`代表共有变量,`#`代表受保护的(protected)

> 这里有一个小细节,就是通常来说我们不需要考虑很多,所有的变量都是私有的(-),所有的类方法都是共有的(+)就可以了
>
> 而且你也不需要去考虑变量的数据类型,考虑类函数的参数,这些我们都可以省略

![20220609015128](https://raw.githubusercontent.com/learner-lu/picbed/master/20220609015128.png)

这样我们就实现了一个基本的类,有很多文章都讲了这六大关系,这里我用自己的话再解释一遍,如果你已经掌握了这部分并且知道怎么画图那么可以直接跳过

### 继承

继承的符号比较简单,就是一个实现的箭头,结尾是三角形

继承的子对象不但具有父对象所有的类变量,类方法,还可以有自己独特的,继承减少代码耦合

> 如下的继承关系其实在画类图中非常常见,一般一个系统都会有几个身份的用户,那我们就可以设计一个基本的User类,然后其他的用户都继承这个用户

![20220609015534](https://raw.githubusercontent.com/learner-lu/picbed/master/20220609015534.png)

### 关联

关联可以用于表示两个对象之间的简单关系,它们之间不存在你包含我我包含你这种关系,比如说猎豹和羚羊就是捕食关系,我们就可以用一条实线将他们连接起来

![20220609030858](https://raw.githubusercontent.com/learner-lu/picbed/master/20220609030858.png)

> 这个一般来说不太会用得到,除非确实类之间有明显的关系
>
> 这里说的比较浅,还有哪种一对一一对多各种比较复杂的

### 聚合和组合

这两个比较相似,我们需要知道它们之间的差别

- 聚合是指整体和个体之间的关系,比如大象群和大象,家庭和父母+孩子

  > 空心菱形,菱形位置在父类

  聚合的父类被删除了子类仍然有效,部分和整体的生命周期未必一致

  ![2351154-f96326e0b08575d6](https://raw.githubusercontent.com/learner-lu/picbed/master/2351154-f96326e0b08575d6.webp)

  对于这个例子来说,一个家庭由父亲母亲孩子组成,即使一个家庭类被删除了,父母和孩子的类依然有效且存在

  > 这个例子可能也不是很好解释,因为你可能会说家庭没有了这个子类还有什么用. 你可以把父母看成爱丽丝(A),鲍勃(B),他们都是一个独立的个体,拥有自己的类变量,类函数,只是单纯的他们结婚了,所以新建了一个家庭的class类将他们聚合到了一起,但是他们俩除了这个关系各自依然有着独立的其他关系,所以即使以后他们离婚了这两个对象AB依然可以独立存在不受影响

- 组合是指整体和局部的关系,比如身体和手,腿,头. 账单和账单信息,账单细节

  > 实心菱形,菱形位置在父类

  组合的父类和子类具有相同的生命周期,父类删除子类也随之删除,可以说子类没有单独存在的必要

  ![2351154-ceeb6431789dbe89](https://raw.githubusercontent.com/learner-lu/picbed/master/2351154-ceeb6431789dbe89.webp)

  这个例子比较容易解释,四个子类组合成为了身体,如果身体删除了,那么这四个子类也没有存在的意义了

  > 你可能会说那手,头也能像刚才说的还有自己的价值自己的关系呢,这个为什么不是聚合呢? 没错,这就要看你从什么角度来定义这个问题,就好像银行的账单和账单信息,账单细节,他们这种本来就属于银行账单的附属品,属于紧密相连的,如果删除了账单,单独的账单信息和账单细节没有任何意义. 这个问题也是类似,如果说你的这四个类还有其他十分重要的关系,那么这肯定属于单纯的把这四个类聚合到一起组一个临时的class放在一起就行,但是现在的问题是body这个class就是由他们四个组合而成的,且body这个class是主类,这四个只是body的组成成分,各自有一些属性罢了,那这肯定是属于组合

一般来说组合用的比较多,因为通常来说类的设计到了子类就停了,不会那么复杂.当然也不完全

### 依赖

> 这个一般来说不太会用得到

依赖和关联还是有所区别的,依赖一般是不同级别的之间的关系,比如人和空气,鱼和水,这种人与自然的感觉.

关联更倾向于人和人,朋友关系这种,相同的级别.

![v2-e5af6625d202f3220b7333692dabad42_720w](https://raw.githubusercontent.com/learner-lu/picbed/master/v2-e5af6625d202f3220b7333692dabad42_720w.png)

### 实现接口

> 这个一般来说也用不到

很多面向对象的语言中都引入了接口的概念,如Java、C#等,在接口中通常没有属性,而且所有的操作都是抽象的,只有操作的声明没有操作的实现

你可以理解为一个纯接口的类,只声明方法.类声明`<<interface>>`接口属性

![20220609034124](https://raw.githubusercontent.com/learner-lu/picbed/master/20220609034124.png)

这样其他的类可以利用这个接口来实现自己的变量和方法,在很多图形学的库中都有所涉及,不过类图中一般来说用不到

## 一个例子

期中考试的模型的类图,室友的答案

![20220609034500](https://raw.githubusercontent.com/learner-lu/picbed/master/20220609034500.png)

---

参考

https://www.bilibili.com/video/BV1P741127u7

https://zhuanlan.zhihu.com/p/267298708

https://www.jianshu.com/p/e74f90ae1802